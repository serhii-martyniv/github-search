{"ast":null,"code":"import _objectSpread from\"/var/www/js/github-search/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{getAuth}from\"../api/api\";import{toggleFollowingProgressActionCreator,toggleIsFetchingActionCreator}from\"./UsersReducer\";var SET_USER_DATA='SET_USER_DATA';var initialStorage={userId:null,email:null,login:null,isAuth:false};var authReducer=function authReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialStorage;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SET_USER_DATA:return _objectSpread({},state,{},action.data,{isAuth:true});default:return state;}};export var setUserDataActionCreator=function setUserDataActionCreator(userId,email,login){return{type:SET_USER_DATA,data:{userId:userId,email:email,login:login}};};export var setAuthThunkCreator=function setAuthThunkCreator(){return function(dispatch){dispatch(toggleIsFetchingActionCreator(true));getAuth().then(function(data){var id=data.id,login=data.login,email=data.email;if(id){dispatch(setUserDataActionCreator(id,email,login));dispatch(toggleIsFetchingActionCreator(false));}});};};export default authReducer;","map":{"version":3,"sources":["/var/www/js/github-search/src/redux/AuthReducer.js"],"names":["getAuth","toggleFollowingProgressActionCreator","toggleIsFetchingActionCreator","SET_USER_DATA","initialStorage","userId","email","login","isAuth","authReducer","state","action","type","data","setUserDataActionCreator","setAuthThunkCreator","dispatch","then","id"],"mappings":"+IAAA,OAAQA,OAAR,KAAsB,YAAtB,CACA,OAAQC,oCAAR,CAA8CC,6BAA9C,KAAkF,gBAAlF,CAEA,GAAMC,CAAAA,aAAa,CAAG,eAAtB,CAEA,GAAIC,CAAAA,cAAc,CAAG,CACjBC,MAAM,CAAE,IADS,CAEjBC,KAAK,CAAE,IAFU,CAGjBC,KAAK,CAAE,IAHU,CAIjBC,MAAM,CAAE,KAJS,CAArB,CAOA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAoC,IAAnCC,CAAAA,KAAmC,2DAA3BN,cAA2B,IAAXO,CAAAA,MAAW,2CACpD,OAAQA,MAAM,CAACC,IAAf,EACI,IAAKT,CAAAA,aAAL,CACI,wBACOO,KADP,IAEOC,MAAM,CAACE,IAFd,EAGIL,MAAM,CAAE,IAHZ,GAKJ,QACI,MAAOE,CAAAA,KAAP,CARR,CAWH,CAZD,CAcA,MAAO,IAAMI,CAAAA,wBAAwB,CAAG,QAA3BA,CAAAA,wBAA2B,CAACT,MAAD,CAASC,KAAT,CAAgBC,KAAhB,QAA2B,CAACK,IAAI,CAAET,aAAP,CAAsBU,IAAI,CAAE,CAACR,MAAM,CAANA,MAAD,CAASC,KAAK,CAALA,KAAT,CAAgBC,KAAK,CAALA,KAAhB,CAA5B,CAA3B,EAAjC,CAEP,MAAO,IAAMQ,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,CACrC,MAAO,UAACC,QAAD,CAAc,CACjBA,QAAQ,CAACd,6BAA6B,CAAC,IAAD,CAA9B,CAAR,CACAF,OAAO,GAAGiB,IAAV,CAAe,SAACJ,IAAD,CAAU,IAChBK,CAAAA,EADgB,CACIL,IADJ,CAChBK,EADgB,CACZX,KADY,CACIM,IADJ,CACZN,KADY,CACLD,KADK,CACIO,IADJ,CACLP,KADK,CAErB,GAAIY,EAAJ,CAAQ,CACJF,QAAQ,CAACF,wBAAwB,CAACI,EAAD,CAAKZ,KAAL,CAAYC,KAAZ,CAAzB,CAAR,CACAS,QAAQ,CAACd,6BAA6B,CAAC,KAAD,CAA9B,CAAR,CACH,CACJ,CAND,EAOH,CATD,CAUH,CAXM,CAaP,cAAeO,CAAAA,WAAf","sourcesContent":["import {getAuth} from \"../api/api\";\nimport {toggleFollowingProgressActionCreator, toggleIsFetchingActionCreator} from \"./UsersReducer\";\n\nconst SET_USER_DATA = 'SET_USER_DATA';\n\nlet initialStorage = {\n    userId: null,\n    email: null,\n    login: null,\n    isAuth: false\n};\n\nconst authReducer = (state = initialStorage, action) => {\n    switch (action.type) {\n        case SET_USER_DATA:\n            return {\n                ...state,\n                ...action.data,\n                isAuth: true\n            }\n        default:\n            return state;\n    }\n\n};\n\nexport const setUserDataActionCreator = (userId, email, login) => ({type: SET_USER_DATA, data: {userId, email, login}})\n\nexport const setAuthThunkCreator = () => {\n    return (dispatch) => {\n        dispatch(toggleIsFetchingActionCreator(true))\n        getAuth().then((data) => {\n            let {id, login, email} = data\n            if (id) {\n                dispatch(setUserDataActionCreator(id, email, login))\n                dispatch(toggleIsFetchingActionCreator(false))\n            }\n        })\n    }\n}\n\nexport default authReducer;"]},"metadata":{},"sourceType":"module"}