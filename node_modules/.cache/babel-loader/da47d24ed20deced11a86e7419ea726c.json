{"ast":null,"code":"import _toConsumableArray from\"/var/www/js/github-search/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/var/www/js/github-search/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{checkIfFollows,followUser,getUserFollowers,getUserFollowing,getUsers,searchUser,unfollowUser}from\"../api/api\";var FOLLOW='FOLLOW';var UNFOLLOW='UNFOLLOW';var SET_USERS='SET_USERS';var SET_CURRENT_PAGE='SET_CURRENT_PAGE';var SET_TOTAL_USERS_COUNT='SET_TOTAL_USERS_COUNT';var TOGGLE_IS_FETCHING='TOGGLE_IS_FETCHING';var TOGGLE_IS_FOLLOWING_PROGRESS='TOGGLE_IS_FOLLOWING_PROGRESS';var SET_USER_FOLLOWERS='SET_USER_FOLLOWERS';var SET_USER_FOLLOWINGS='SET_USER_FOLLOWINGS';var initialStorage={users:[],// pagination\npageSize:10,totalUsersCount:100,currentPage:1,isFetching:false,followingInProgress:[]};var usersReducer=function usersReducer(){var storage=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialStorage;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case FOLLOW:return _objectSpread({},storage,{users:storage.users.map(function(u){if(u.id===action.userId){return _objectSpread({},u,{followed:true});}return u;})});case UNFOLLOW:return _objectSpread({},storage,{users:storage.users.map(function(u){if(u.id===action.userId){return _objectSpread({},u,{followed:false});}return u;})});case SET_USER_FOLLOWERS:return _objectSpread({},storage,{users:storage.users.map(function(u){if(u.id===action.userId){return _objectSpread({},u,{followers:action.followers});}return u;})});case SET_USER_FOLLOWINGS:return _objectSpread({},storage,{users:storage.users.map(function(u){if(u.id===action.userId){return _objectSpread({},u,{following:action.following});}return u;})});case SET_USERS:return _objectSpread({},storage,{users:action.users});case SET_CURRENT_PAGE:return _objectSpread({},storage,{currentPage:action.page});case SET_TOTAL_USERS_COUNT:return _objectSpread({},storage,{totalUsersCount:action.totalUsersCount});case TOGGLE_IS_FETCHING:return _objectSpread({},storage,{isFetching:action.isFetching});case TOGGLE_IS_FOLLOWING_PROGRESS:return _objectSpread({},storage,{followingInProgress:action.followingInProgress?[].concat(_toConsumableArray(storage.followingInProgress),[action.userId]):storage.followingInProgress.filter(function(id){return id!==action.userId;})});default:return storage;}};export var followActionCreator=function followActionCreator(userId){return{type:FOLLOW,userId:userId};};export var setUserFollowersActionCreator=function setUserFollowersActionCreator(userId,followers){return{type:SET_USER_FOLLOWERS,userId:userId,followers:followers};};export var setUserFollowingsActionCreator=function setUserFollowingsActionCreator(userId,following){return{type:SET_USER_FOLLOWINGS,userId:userId,following:following};};export var unfollowActionCreator=function unfollowActionCreator(userId){return{type:UNFOLLOW,userId:userId};};export var setUsersActionCreator=function setUsersActionCreator(users){return{type:SET_USERS,users:users};};export var setCurrentPageActionCreator=function setCurrentPageActionCreator(page){return{type:SET_CURRENT_PAGE,page:page};};export var setTotalUsersCountActionCreator=function setTotalUsersCountActionCreator(totalUsersCount){return{type:SET_TOTAL_USERS_COUNT,totalUsersCount:totalUsersCount};};export var toggleIsFetchingActionCreator=function toggleIsFetchingActionCreator(isFetching){return{type:TOGGLE_IS_FETCHING,isFetching:isFetching};};export var toggleFollowingProgressActionCreator=function toggleFollowingProgressActionCreator(followingInProgress,userId){return{type:TOGGLE_IS_FOLLOWING_PROGRESS,followingInProgress:followingInProgress,userId:userId};};export var getUsersThunkCreator=function getUsersThunkCreator(currentPage,pageSize){return function(dispatch){dispatch(toggleIsFetchingActionCreator(true));getUsers(currentPage,pageSize).then(function(data){dispatch(setUsersActionCreator(data));console.log(data);data.forEach(function(item){// Get User Followers and set to the state\ndispatch(getUserFollowersThunkCreator(item.login,item.id));// Get User Followings and set to the state\ndispatch(getUserFollowingThunkCreator(item.login,item.id));dispatch(toggleIsFetchingActionCreator(false));// Check if user follows current authorized user\ncheckIfFollows(item.login).then(function(data){if(data.ok){dispatch(followActionCreator(item.id));}else{dispatch(unfollowActionCreator(item.id));}});});});};};export var getUserFollowersThunkCreator=function getUserFollowersThunkCreator(login,id){return function(dispatch){dispatch(toggleIsFetchingActionCreator(true));getUserFollowers(login).then(function(data){if(data){dispatch(setUserFollowersActionCreator(id,data.length));}dispatch(toggleIsFetchingActionCreator(false));});};};export var searchUserThunkCreator=function searchUserThunkCreator(username){return function(dispatch){dispatch(toggleIsFetchingActionCreator(true));if(username){searchUser(username).then(function(data){if(data){dispatch(toggleIsFetchingActionCreator(false));dispatch(setUsersActionCreator(data));}});}else{dispatch(getUsersThunkCreator());}};};export var getUserFollowingThunkCreator=function getUserFollowingThunkCreator(login,id){return function(dispatch){dispatch(toggleIsFetchingActionCreator(true));getUserFollowing(login).then(function(data){if(data){dispatch(setUserFollowingsActionCreator(id,data.length));}dispatch(toggleIsFetchingActionCreator(false));});};};export var followUserThunkCreator=function followUserThunkCreator(login,id){return function(dispatch){dispatch(toggleFollowingProgressActionCreator(true,id));followUser(login).then(function(data){if(data.ok){dispatch(followActionCreator(id));}dispatch(toggleFollowingProgressActionCreator(false,id));});};};export var unfollowUserThunkCreator=function unfollowUserThunkCreator(login,id){return function(dispatch){dispatch(toggleFollowingProgressActionCreator(true,id));unfollowUser(login).then(function(data){if(data.ok){dispatch(unfollowActionCreator(id));}dispatch(toggleFollowingProgressActionCreator(false,id));});};};export default usersReducer;","map":{"version":3,"sources":["/var/www/js/github-search/src/redux/UsersReducer.js"],"names":["checkIfFollows","followUser","getUserFollowers","getUserFollowing","getUsers","searchUser","unfollowUser","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","TOGGLE_IS_FETCHING","TOGGLE_IS_FOLLOWING_PROGRESS","SET_USER_FOLLOWERS","SET_USER_FOLLOWINGS","initialStorage","users","pageSize","totalUsersCount","currentPage","isFetching","followingInProgress","usersReducer","storage","action","type","map","u","id","userId","followed","followers","following","page","filter","followActionCreator","setUserFollowersActionCreator","setUserFollowingsActionCreator","unfollowActionCreator","setUsersActionCreator","setCurrentPageActionCreator","setTotalUsersCountActionCreator","toggleIsFetchingActionCreator","toggleFollowingProgressActionCreator","getUsersThunkCreator","dispatch","then","data","console","log","forEach","item","getUserFollowersThunkCreator","login","getUserFollowingThunkCreator","ok","length","searchUserThunkCreator","username","followUserThunkCreator","unfollowUserThunkCreator"],"mappings":"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","sourcesContent":["import {\n    checkIfFollows,\n    followUser,\n    getUserFollowers,\n    getUserFollowing,\n    getUsers,\n    searchUser,\n    unfollowUser\n} from \"../api/api\";\n\nconst FOLLOW = 'FOLLOW';\nconst UNFOLLOW = 'UNFOLLOW';\nconst SET_USERS = 'SET_USERS';\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE';\nconst SET_TOTAL_USERS_COUNT = 'SET_TOTAL_USERS_COUNT';\nconst TOGGLE_IS_FETCHING = 'TOGGLE_IS_FETCHING';\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE_IS_FOLLOWING_PROGRESS';\nconst SET_USER_FOLLOWERS = 'SET_USER_FOLLOWERS';\nconst SET_USER_FOLLOWINGS = 'SET_USER_FOLLOWINGS';\n\nlet initialStorage = {\n    users: [],\n    // pagination\n    pageSize: 10,\n    totalUsersCount: 100,\n    currentPage: 1,\n    isFetching: false,\n    followingInProgress: []\n};\n\nconst usersReducer = (storage = initialStorage, action) => {\n    switch (action.type) {\n        case FOLLOW:\n            return {\n                ...storage,\n                users: storage.users.map(u => {\n                    if (u.id === action.userId) {\n                        return {...u, followed: true}\n                    }\n                    return u\n                })\n            }\n\n        case UNFOLLOW:\n            return {\n                ...storage,\n                users: storage.users.map(u => {\n                    if (u.id === action.userId) {\n                        return {...u, followed: false}\n                    }\n                    return u\n                })\n            }\n        case SET_USER_FOLLOWERS:\n            return {\n                ...storage,\n                users: storage.users.map(u => {\n                    if (u.id === action.userId) {\n                        return {...u, followers: action.followers}\n                    }\n                    return u\n                })\n            }\n        case SET_USER_FOLLOWINGS:\n            return {\n                ...storage,\n                users: storage.users.map(u => {\n                    if (u.id === action.userId) {\n                        return {...u, following: action.following}\n                    }\n                    return u\n                })\n            }\n        case SET_USERS:\n            return {...storage, users: action.users}\n        case SET_CURRENT_PAGE:\n            return {...storage, currentPage: action.page}\n        case SET_TOTAL_USERS_COUNT:\n            return {...storage, totalUsersCount: action.totalUsersCount}\n        case TOGGLE_IS_FETCHING:\n            return {...storage, isFetching: action.isFetching}\n        case TOGGLE_IS_FOLLOWING_PROGRESS:\n            return {...storage, followingInProgress: action.followingInProgress\n                    ? [...storage.followingInProgress, action.userId]\n                    : storage.followingInProgress.filter(id => id!==action.userId)\n            }\n        default:\n            return storage;\n    }\n\n};\n\nexport const followActionCreator = (userId) => ({type: FOLLOW, userId})\nexport const setUserFollowersActionCreator = (userId, followers) => ({type: SET_USER_FOLLOWERS, userId: userId, followers: followers})\nexport const setUserFollowingsActionCreator = (userId, following) => ({type: SET_USER_FOLLOWINGS, userId: userId, following: following})\nexport const unfollowActionCreator = (userId) => ({type: UNFOLLOW, userId})\nexport const setUsersActionCreator = (users) => ({type: SET_USERS, users})\nexport const setCurrentPageActionCreator = (page) => ({type: SET_CURRENT_PAGE, page})\nexport const setTotalUsersCountActionCreator = (totalUsersCount) => ({type: SET_TOTAL_USERS_COUNT, totalUsersCount})\nexport const toggleIsFetchingActionCreator = (isFetching) => ({type: TOGGLE_IS_FETCHING, isFetching})\nexport const toggleFollowingProgressActionCreator = (followingInProgress, userId) => ({type: TOGGLE_IS_FOLLOWING_PROGRESS, followingInProgress, userId})\n\nexport const getUsersThunkCreator = (currentPage, pageSize) => {\n   return (dispatch) => {\n       dispatch(toggleIsFetchingActionCreator(true))\n       getUsers(currentPage, pageSize).then((data) => {\n           dispatch(setUsersActionCreator(data))\n           console.log(data)\n           data.forEach((item) => {\n               // Get User Followers and set to the state\n               dispatch(getUserFollowersThunkCreator(item.login, item.id))\n               // Get User Followings and set to the state\n               dispatch(getUserFollowingThunkCreator(item.login, item.id))\n\n               dispatch(toggleIsFetchingActionCreator(false))\n               // Check if user follows current authorized user\n               checkIfFollows(item.login).then((data) => {\n                   if (data.ok) {\n                       dispatch(followActionCreator(item.id))\n                   }\n                   else {\n                       dispatch(unfollowActionCreator(item.id))\n                   }\n               })\n           })\n       })\n    }\n}\n\nexport const getUserFollowersThunkCreator = (login, id) => {\n    return (dispatch) => {\n        dispatch(toggleIsFetchingActionCreator(true))\n        getUserFollowers(login).then(data => {\n            if (data) {\n                dispatch(setUserFollowersActionCreator(id, data.length))\n            }\n            dispatch(toggleIsFetchingActionCreator(false))\n        })\n    }\n}\n\nexport const searchUserThunkCreator = (username) => {\n    return (dispatch) => {\n        dispatch(toggleIsFetchingActionCreator(true))\n        if (username) {\n            searchUser(username).then((data) => {\n                if(data) {\n                    dispatch(toggleIsFetchingActionCreator(false))\n                    dispatch(setUsersActionCreator(data))\n                }\n            })\n        }\n        else {\n            dispatch(getUsersThunkCreator())\n        }\n\n    }\n}\n\nexport const getUserFollowingThunkCreator = (login, id) => {\n    return (dispatch) => {\n        dispatch(toggleIsFetchingActionCreator(true))\n        getUserFollowing(login).then(data => {\n            if (data) {\n                dispatch(setUserFollowingsActionCreator(id, data.length))\n            }\n            dispatch(toggleIsFetchingActionCreator(false))\n        })\n    }\n}\n\nexport const followUserThunkCreator = (login, id) => {\n    return (dispatch) => {\n        dispatch(toggleFollowingProgressActionCreator(true, id))\n        followUser(login).then(data => {\n            if (data.ok) {\n                dispatch(followActionCreator(id))\n            }\n            dispatch(toggleFollowingProgressActionCreator(false, id))\n        })\n    }\n}\n\nexport const unfollowUserThunkCreator = (login, id) => {\n    return (dispatch) => {\n        dispatch(toggleFollowingProgressActionCreator(true, id))\n        unfollowUser(login).then(data => {\n            if (data.ok) {\n                dispatch(unfollowActionCreator(id))\n            }\n            dispatch(toggleFollowingProgressActionCreator(false, id))\n        })\n    }\n}\n\nexport default usersReducer;"]},"metadata":{},"sourceType":"module"}